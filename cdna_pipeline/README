1. Data Augmentation & Preprocessing Block  
   - Apply image transformations (resize, normalize, color jitter, flip, etc.) before feeding images to the model.

2. Data Loader / Preprocessing  
   - Load source and target domain datasets.
   - Create batches with labels (source) and domain indicators (0 = source, 1 = target).

3. Feature Extractor (DINO backbone)  
   - Extract deep visual features from each image.
   - Usually pretrained and optionally fine-tuned.

4. Classifier Head  
   - Map feature vectors to class logits.
   - Compute softmax probabilities p(y|f) for classification.

5. Feature–Class Combination (CDAN)  
   - Combine feature f and predicted class p(y|f).
   - Typically via outer product or concatenation (conditional alignment).

6. Gradient Reversal Layer (GRL)  
   - Reverse gradient direction from the domain discriminator.
   - Enables adversarial training for domain confusion.

7. Domain Discriminator  
   - Binary classifier predicting source (0) or target (1) domain.
   - Uses combined representation (f ⊗ p).

8. Auxiliary Loss Module (optional)  
   - Additional losses like Entropy Minimization, Prototype Alignment, or Confidence Regularization.

9. Loss Module (Loss Computation)  
   - Combine all losses:
       L_total = L_classification (CE) + λ * L_domain (BCE) + β * L_auxiliary

10. Optimizer & Scheduler  
    - Update model parameters each iteration.
    - Adjust learning rate dynamically (e.g., cosine, step LR).

11. Model Wrapper / Trainer Class  
    - Orchestrate training loop (forward, backward, update, checkpoint, logging, validation).

12. Evaluation & Metrics Module  
    - Evaluate trained model on target test data.
    - Report accuracy, F1-score, confusion matrix, etc.
